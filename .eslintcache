[{"/Users/Cannigia/Code/React/amaclone/src/App.js":"1","/Users/Cannigia/Code/React/amaclone/src/index.js":"2","/Users/Cannigia/Code/React/amaclone/src/Header.js":"3","/Users/Cannigia/Code/React/amaclone/src/Home.js":"4","/Users/Cannigia/Code/React/amaclone/src/Product.js":"5","/Users/Cannigia/Code/React/amaclone/src/Checkout.js":"6","/Users/Cannigia/Code/React/amaclone/src/Subtotal.js":"7","/Users/Cannigia/Code/React/amaclone/src/Reducer.js":"8","/Users/Cannigia/Code/React/amaclone/src/StateProvider.js":"9","/Users/Cannigia/Code/React/amaclone/src/CheckoutProduct.js":"10","/Users/Cannigia/Code/React/amaclone/src/Login.js":"11","/Users/Cannigia/Code/React/amaclone/src/Firebase.js":"12","/Users/Cannigia/Code/React/amaclone/src/Payment.js":"13","/Users/Cannigia/Code/React/amaclone/src/Axios.js":"14","/Users/Cannigia/Code/React/amaclone/src/Orders.js":"15","/Users/Cannigia/Code/React/amaclone/src/Order.js":"16"},{"size":1877,"mtime":1608582139375,"results":"17","hashOfConfig":"18"},{"size":363,"mtime":1608084964398,"results":"19","hashOfConfig":"18"},{"size":2393,"mtime":1608840932022,"results":"20","hashOfConfig":"18"},{"size":4419,"mtime":1608084963580,"results":"21","hashOfConfig":"18"},{"size":1323,"mtime":1608084963723,"results":"22","hashOfConfig":"18"},{"size":1365,"mtime":1608084963361,"results":"23","hashOfConfig":"18"},{"size":1412,"mtime":1608090667291,"results":"24","hashOfConfig":"18"},{"size":1291,"mtime":1608581285729,"results":"25","hashOfConfig":"18"},{"size":479,"mtime":1608084963959,"results":"26","hashOfConfig":"18"},{"size":1277,"mtime":1608840751576,"results":"27","hashOfConfig":"18"},{"size":2364,"mtime":1608015298252,"results":"28","hashOfConfig":"18"},{"size":585,"mtime":1608084963461,"results":"29","hashOfConfig":"18"},{"size":6092,"mtime":1608835413347,"results":"30","hashOfConfig":"18"},{"size":262,"mtime":1608844964545,"results":"31","hashOfConfig":"18"},{"size":1121,"mtime":1608835828321,"results":"32","hashOfConfig":"18"},{"size":1300,"mtime":1608840699581,"results":"33","hashOfConfig":"18"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"36","usedDeprecatedRules":"37"},"1xd4j9c",{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"40","messages":"41","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"37"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"46","messages":"47","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"48","usedDeprecatedRules":"37"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"51"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"56","messages":"57","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"62","messages":"63","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"64","usedDeprecatedRules":"37"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"67","messages":"68","errorCount":1,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/Cannigia/Code/React/amaclone/src/App.js",["71","72"],"import React, { useEffect } from 'react';\nimport './css/App.css';\nimport Header from './Header'\nimport Home from './Home'\nimport Checkout from './Checkout'\nimport Login from './Login'\nimport Payment from './Payment'\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom'\nimport { auth } from './Firebase'\nimport { useStateValue } from './StateProvider';\nimport { loadStripe } from '@stripe/stripe-js'\nimport { Elements } from '@stripe/react-stripe-js'\nimport Orders from './Orders';\n\n// Public API key\nconst promise = loadStripe( \n  'pk_test_51Hz8ZcLB7D9v0YrASq2cLEQn9m6qtx7KadfaYPw22TSIweCp2qQgs0ufxBvOiiQg3hwB7nD2D7oeI3mMWSEfh2tT00FRPS4ups'\n)\n\n\nfunction App() {\n  const [{}, dispatch] = useStateValue();\n\n  useEffect(() => {\n    // Will only run once when the App component loads\n    auth.onAuthStateChanged(authUser => {\n      console.log('THE USER IS >>>', authUser);\n\n      if (authUser) {\n        // the User just/was logged in\n        dispatch({\n          type: 'SET_USER',\n          user: authUser\n        })\n\n      } else {\n        // the User is logged out\n        dispatch({\n          type: 'SET_USER',\n          user: null\n        })\n      }\n    })\n  }, [])\n\n  return (\n    // BEM\n    <Router>\n      <div className=\"app\">\n        <Switch>\n          <Route path='/orders'>\n            <Header />\n            <Orders />\n          </Route>\n          <Route path='/login'>\n            <Login />\n          </Route>\n          <Route path='/checkout'>\n            <Header />\n            <Checkout />\n          </Route>\n          <Route path='/payment'>\n            <Header />\n            <Elements stripe={promise}>\n              <Payment />\n            </Elements>\n          </Route>\n          <Route path='/'>\n            <Header />\n            <Home />\n          </Route>\n        </Switch>\n      </div>\n    </Router>\n\n  );\n}\n\nexport default App;\n    ",["73","74"],"/Users/Cannigia/Code/React/amaclone/src/index.js",[],"/Users/Cannigia/Code/React/amaclone/src/Header.js",["75"],"/Users/Cannigia/Code/React/amaclone/src/Home.js",[],"/Users/Cannigia/Code/React/amaclone/src/Product.js",["76"],"/Users/Cannigia/Code/React/amaclone/src/Checkout.js",["77"],"import React from 'react'\nimport './css/Checkout.css'\nimport Subtotal from './Subtotal'\nimport CheckoutProduct from './CheckoutProduct'\nimport { useStateValue } from './StateProvider';\n\nfunction Checkout() {\n    const [state, dispatch] = useStateValue();\n\n    return (\n        <div className=\"checkout\">\n            <div className='checkout__left'>\n                <img className='checkout__ad'\n                    src='https://www.disruptivestatic.com/wp-content/uploads/2018/10/Screen-Shot-2018-10-29-at-11.50.03-AM-450x96.png'\n                    alt=''\n                />\n\n                <div>\n                    <h3>Hello, {(state.user)?.email}!</h3>\n                    <h2 className='checkout__title'>\n                        Your Shopping Bag</h2>\n                    {/* {console.log(state.bag)} */}\n                    {state.bag.map(item => (\n                        <CheckoutProduct\n                            id={item.id}\n                            title={item.title}\n                            image={item.image}\n                            price={item.price}\n                            rating={item.rating}\n                        />\n                    ))}\n                </div>\n            </div>\n\n            <div className='checkout__right'>\n                <Subtotal />\n            </div>\n\n        </div>\n    )\n}\n\nexport default Checkout\n","/Users/Cannigia/Code/React/amaclone/src/Subtotal.js",["78"],"import React from 'react';\nimport './css/Subtotal.css';\nimport CurrencyFormat from 'react-currency-format';\nimport { useStateValue } from './StateProvider';\nimport { getBagTotal } from './Reducer';\nimport { useHistory } from 'react-router-dom';\n\nfunction Subtotal() {\n\n    const history = useHistory();\n    const [state, dispatch] = useStateValue();\n\n    return (\n        <div className='subtotal'>\n            <CurrencyFormat\n                renderText={(value) => (\n                    <>\n                        <p>\n                            {/* Part of the homework */}\n                            Subtotal ({state.bag.length} items):\n                                <strong> {value}</strong>\n                        </p>\n                        <small className='subtotal__gift'>\n                            <input type='checkbox' />\n                            This order contains a gift\n                        </small>\n                    </>\n                )}\n                decimalScale={2} //allows 2 digits of decimal number\n                value={getBagTotal(state.bag)} // Part of homework\n                displayType={'text'}\n                thousandSeparator={true}\n                prefix={'$'}\n            />\n\n            <button onClick={e => history.push('/payment')}> \n                Proceed to Checkout\n                </button>\n        </div>\n        \n    )\n}\n\nexport default Subtotal\n","/Users/Cannigia/Code/React/amaclone/src/Reducer.js",[],"/Users/Cannigia/Code/React/amaclone/src/StateProvider.js",[],"/Users/Cannigia/Code/React/amaclone/src/CheckoutProduct.js",["79"],"/Users/Cannigia/Code/React/amaclone/src/Login.js",[],"/Users/Cannigia/Code/React/amaclone/src/Firebase.js",[],"/Users/Cannigia/Code/React/amaclone/src/Payment.js",["80"],"import { CardElement, useElements, useStripe } from '@stripe/react-stripe-js'\nimport axios from './Axios'\nimport React, { useEffect, useState } from 'react'\nimport CurrencyFormat from 'react-currency-format'\nimport { Link, useHistory } from 'react-router-dom'\nimport CheckoutProduct from './CheckoutProduct'\nimport './css/Payment.css'\nimport { getBagTotal } from './Reducer'\nimport { useStateValue } from './StateProvider'\nimport { db } from './Firebase'\n\n\nfunction Payment() {\n    const [state, dispatch] = useStateValue();\n    const history = useHistory()\n\n    const stripe = useStripe();\n    const elements = useElements();\n\n    const [error, setError] = useState(null);\n    const [disabled, setDisabled] = useState(true);\n    const [succeeded, setSucceeded] = useState(false);\n    const [processing, setProcessing] = useState('');\n    const [clientSecret, setClientSecret] = useState(true)\n\n    useEffect(() => {\n        // generate stripe secret which allows us to charge a customer\n        const getClientSecret = async () => {\n            const response = await axios({\n                method: 'post',\n                // Stripe expects the total in a currency sub-units\n                url: `/payments/create?total=${getBagTotal(state.bag) * 100}`\n            });\n            setClientSecret(response.data.clientSecret)\n        }\n\n        getClientSecret();\n    }, [state.bag])\n\n    console.log('THE SECRET IS >>>>', clientSecret)\n    console.log( 'ðŸ˜Ž' , state.user)\n\n    const submitHandler = async (e) => {\n        // stripe codes\n        e.preventDefault();\n        setProcessing(true);\n\n        const payload = await stripe.confirmCardPayment(clientSecret, {\n            payment_method: {\n                card: elements.getElement(CardElement)\n            }\n        })\n            .then(({ paymentIntent }) => {\n                // paymentIntent = Payment confirmation (Code from Stripe)\n\n                db    // NoSQL database\n                    .collection('users')\n                    .doc(state.user?.uid)\n                    .collection('orders') \n                    .doc(paymentIntent.id)\n                    .set({\n                        bag: state.bag,\n                        amount: paymentIntent.amount,\n                        created: paymentIntent.created\n                    })\n\n                \n                setSucceeded(true);\n                setError(null);\n                setProcessing(false);\n\n                dispatch({\n                    type: 'EMPTY_BASKET'\n                })\n                            \n                history.replace('/orders')\n        })\n\n    }\n\n    const changeHandler = e => {\n        // listen for changes in the CardElement\n        // displays errors as customer types their card details\n        setDisabled(e.empty);\n        setError(e.error ? e.error.message : \"\");\n    }\n\n    return (\n        <div className='payment'>\n            <div className='payment__container'>\n                <h1>\n                    Checkout (<Link to='/checkout'>{state.bag?.length} items</Link>)\n                </h1>\n\n                {/* Payment section -> Address */}\n                <div className='payment__section'>\n                    <div className='payment__title'>\n                        <h3>Delivery Address</h3>\n                    </div>\n                    <div className='payment__address'>\n                        <p>{ state.user?.email}</p>\n                        <p>123 Cooper Street</p>\n                        <p>Brooklyn, NY</p>\n                    </div>\n\n                </div>\n              \n                {/* Payment section -> Review Bag */}\n                <div className='payment__section'>\n                    <div className='payment__title'>\n                            <h3>Review your bag</h3>\n                    </div>\n                    <div className='payment__items'>\n                        {state.bag.map(item => (\n                            <CheckoutProduct\n                                id={item.id}\n                                title={item.title}\n                                image={item.image}\n                                price={item.price}\n                                rating={item.rating}\n                            />\n                        ))}\n                    </div>\n                </div>\n              \n              \n                {/* Payment section -> Payment method */}\n                <div className='payment__section'>\n                    <div className='payment__title'>\n                        <h3>Payment Method</h3>\n                    </div>\n                    <div className='payment__details'>\n                        {/* Stripe payment Magic ;) */}\n                        \n                        <form onSubmit={submitHandler}>\n                            <CardElement onChange={changeHandler} />\n\n                            <div className='payment__priceContainer'>\n                                <CurrencyFormat\n                                    renderText={(value) => (\n                                        <>\n                                            <h3>Order Total: {value}</h3>  \n                                        </>\n                                    )}\n                                    decimalScale={2} //allows 2 digits of decimal number\n                                    value={getBagTotal(state.bag)}\n                                    displayType={'text'}\n                                    thousandSeparator={true}\n                                    prefix={'$'}\n                                />\n                                <button disabled={processing || disabled || succeeded}>\n                                    <span>{processing ? <p>Processing</p> : \"Place Order\"}</span>\n                                </button>\n                            </div>\n                            {/*Errors */}\n                            {error && <div>{error}</div>}\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Payment\n","/Users/Cannigia/Code/React/amaclone/src/Axios.js",[],"/Users/Cannigia/Code/React/amaclone/src/Orders.js",["81","82"],"/Users/Cannigia/Code/React/amaclone/src/Order.js",[],{"ruleId":"83","severity":1,"message":"84","line":22,"column":10,"nodeType":"85","messageId":"86","endLine":22,"endColumn":12},{"ruleId":"87","severity":1,"message":"88","line":44,"column":6,"nodeType":"89","endLine":44,"endColumn":8,"suggestions":"90"},{"ruleId":"91","replacedBy":"92"},{"ruleId":"93","replacedBy":"94"},{"ruleId":"95","severity":1,"message":"96","line":9,"column":19,"nodeType":"97","messageId":"98","endLine":9,"endColumn":27},{"ruleId":"95","severity":1,"message":"99","line":6,"column":12,"nodeType":"97","messageId":"98","endLine":6,"endColumn":17},{"ruleId":"95","severity":1,"message":"96","line":8,"column":19,"nodeType":"97","messageId":"98","endLine":8,"endColumn":27},{"ruleId":"95","severity":1,"message":"96","line":11,"column":19,"nodeType":"97","messageId":"98","endLine":11,"endColumn":27},{"ruleId":"95","severity":1,"message":"99","line":7,"column":12,"nodeType":"97","messageId":"98","endLine":7,"endColumn":17},{"ruleId":"95","severity":1,"message":"100","line":48,"column":15,"nodeType":"97","messageId":"98","endLine":48,"endColumn":22},{"ruleId":"95","severity":1,"message":"96","line":7,"column":19,"nodeType":"97","messageId":"98","endLine":7,"endColumn":27},{"ruleId":"101","severity":2,"message":"102","line":35,"column":22,"nodeType":"103","endLine":35,"endColumn":27},"no-empty-pattern","Unexpected empty object pattern.","ObjectPattern","unexpected","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'dispatch'. Either include it or remove the dependency array.","ArrayExpression",["104"],"no-native-reassign",["105"],"no-negated-in-lhs",["106"],"no-unused-vars","'dispatch' is assigned a value but never used.","Identifier","unusedVar","'state' is assigned a value but never used.","'payload' is assigned a value but never used.","react/jsx-no-undef","'Order' is not defined.","JSXIdentifier",{"desc":"107","fix":"108"},"no-global-assign","no-unsafe-negation","Update the dependencies array to be: [dispatch]",{"range":"109","text":"110"},[1185,1187],"[dispatch]"]